<nav class="sidebar" *ngIf="authService.currentUser$ | async as user" [class.open]="isOpen">
  <div *ngIf="user.employeeFunction === 'prÃ©parateur'">

    <!-- Sidebar Header -->
    <div class="logo">
      <i class="fas fa-user-shield"></i>
      <h2>{{ (user?.pl_nom || '') + ' ' + (user?.pl_prenom || '') }}</h2>
      <div class="role-badge">Operator</div>
    </div>

    <!-- Navigation Links -->
    <ul class="nav-links">

      <!-- Dashboard -->
      <li>
        <a routerLink="/prep/dashboard" routerLinkActive="active">
          <i class="fas fa-chart-line"></i>
          <span class="link-text">Dashboard</span>
          <div class="active-indicator"></div>
        </a>
      </li>

      <!-- Add Product -->
      <li class="has-submenu" [class.open]="isSubmenuOpen">
        <a (click)="toggleSubmenu()" class="submenu-toggle">
          <i class="fas fa-plus-circle"></i>
          <span class="link-text">Add Product</span>
          <i class="dropdown-icon fas" [class.fa-chevron-down]="!isSubmenuOpen" [class.fa-chevron-up]="isSubmenuOpen"></i>
        </a>
        <ul class="submenu">
          <li>
            <a routerLink="/prep/products/create/serialized" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-barcode"></i>
              <span class="link-text">Serialized Product</span>
              <div class="active-indicator"></div>
            </a>
          </li>
          <li>
            <a routerLink="/prep/products/create/non-serialized" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-cubes"></i>
              <span class="link-text">Non-Serialized Product</span>
              <div class="active-indicator"></div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Product List -->
      <li>
        <a routerLink="/prep/list" routerLinkActive="active">
          <i class="fas fa-list"></i>
          <span class="link-text">Product List</span>
          <div class="active-indicator"></div>
        </a>
      </li>

      <!-- Gallia -->
      <li class="has-submenu" [class.open]="isGalliaSubmenuOpen">
        <a (click)="toggleGalliaSubmenu()" class="submenu-toggle">
          <i class="fas fa-layer-group"></i>
          <span class="link-text">Gallia</span>
          <i class="dropdown-icon fas" [class.fa-chevron-down]="!isGalliaSubmenuOpen"
            [class.fa-chevron-up]="isGalliaSubmenuOpen"></i>
        </a>
        <ul class="submenu">
          <li>
            <a routerLink="/prep/createG" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-plus"></i>
              <span class="link-text">Create Gallia</span>
              <div class="active-indicator"></div>
            </a>
          </li>
          <li>
            <a routerLink="/prep/gallia" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-list"></i>
              <span class="link-text">Gallia List</span>
              <div class="active-indicator"></div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Label -->
      <li class="has-submenu" [class.open]="isLabelSubmenuOpen">
        <a (click)="toggleLabelSubmenu()" class="submenu-toggle">
          <i class="fas fa-tag"></i>
          <span class="link-text">Standard Label</span>
          <i class="dropdown-icon fas" [class.fa-chevron-down]="!isLabelSubmenuOpen"
            [class.fa-chevron-up]="isLabelSubmenuOpen"></i>
        </a>
        <ul class="submenu">
          <li>
            <a routerLink="/prep/create-etiquette" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-plus"></i>
              <span class="link-text">Create Standard Label</span>
              <div class="active-indicator"></div>
            </a>
          </li>
          <li>
            <a routerLink="/prep/etiquette" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-list"></i>
              <span class="link-text">Standard Label List</span>
              <div class="active-indicator"></div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Flan -->
      <li class="has-submenu" [class.open]="isFlanSubmenuOpen">
        <a (click)="toggleFlanSubmenu()" class="submenu-toggle">
          <i class="fas fa-cut"></i>
          <span class="link-text">Flan</span>
          <i class="dropdown-icon fas" [class.fa-chevron-down]="!isFlanSubmenuOpen"
            [class.fa-chevron-up]="isFlanSubmenuOpen"></i>
        </a>
        <ul class="submenu">
          <li>
            <a routerLink="/prep/flanC" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-plus"></i>
              <span class="link-text">Create Flan</span>
              <div class="active-indicator"></div>
            </a>
          </li>
          <li>
            <a routerLink="/prep/flanList" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-list"></i>
              <span class="link-text">Flan List</span>
              <div class="active-indicator"></div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Assembly -->
      <li class="has-submenu" [class.open]="isAssemblySubmenuOpen">
        <a (click)="toggleAssemblySubmenu()" class="submenu-toggle">
          <i class="fas fa-cogs"></i>
          <span class="link-text">Assembly</span>
          <i class="dropdown-icon fas" [class.fa-chevron-down]="!isAssemblySubmenuOpen"
            [class.fa-chevron-up]="isAssemblySubmenuOpen"></i>
        </a>
        <ul class="submenu">
          <li>
            <a routerLink="/prep/assemblageC" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-plus"></i>
              <span class="link-text">Create Assembly</span>
              <div class="active-indicator"></div>
            </a>
          </li>
          <li>
            <a routerLink="/prep/assemblageL" routerLinkActive="active" (click)="$event.stopPropagation()">
              <i class="fas fa-list"></i>
              <span class="link-text">Assembly List</span>
              <div class="active-indicator"></div>
            </a>
          </li>
        </ul>
      </li>

    </ul>

    <!-- Footer -->
    <div class="sidebar-footer">
      <div class="user-email">
        <div class="email-icon">
          <i class="fas fa-envelope"></i>
        </div>
        <span class="email-text">{{ user?.employeeEmail || '' }}</span>
      </div>


    </div>

  </div>
</nav>