<div class="dashboard-container">
  <app-sidebar
    (dashboardClicked)="showDashboard()"
    (addEmployeeClicked)="toggleAddEmployeeForm(true)"
    (employeeListClicked)="toggleEmployeeList(true)">
  </app-sidebar>
  
  <div class="main-content">
    <!-- Loading and Error States -->
    <div *ngIf="isLoading" class="loading-overlay">
      <div class="loading-spinner"></div>
      <p>Loading data...</p>
    </div>

    <div *ngIf="errorMessage" class="error-alert">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
      <button (click)="errorMessage = null" class="close-btn">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Employee Add Form -->
    <app-employee-add 
      *ngIf="showAddEmployeeForm"
      (success)="onEmployeeAdded()"
      (cancel)="toggleAddEmployeeForm(false)">
    </app-employee-add>

    <!-- Employee List -->
    <app-employee-list
      *ngIf="showEmployeeList"
      (cancel)="toggleEmployeeList(false)">
    </app-employee-list>

    <!-- Dashboard Content -->
    <ng-container *ngIf="shouldShowDashboardContent()">
      <section class="metrics-grid">
        <!-- Total Employees Card -->
        <div class="metric-card card-employees">
          <div class="card-content">
            <div class="card-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="card-details">
              <h3>Total Employees</h3>
              <p class="card-value">{{ totalEmployees }}</p>
              <div class="card-trend">
                <i class="fas fa-arrow-up"></i>
                <span>{{ growthRate }}</span>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <span>Updated just now</span>
          </div>
        </div>

        <!-- Present Today Card -->
        <div class="metric-card card-present">
          <div class="card-content">
            <div class="card-icon">
              <i class="fas fa-calendar-check"></i>
            </div>
            <div class="card-details">
              <h3>Present Today</h3>
              <p class="card-value">{{ presentToday }}</p>
              <div class="card-percentage">
                {{ (presentToday / totalEmployees * 100).toFixed(1) }}%
              </div>
            </div>
          </div>
          <div class="card-footer">
            <span>Today's attendance</span>
          </div>
        </div>

        <!-- Absent Today Card -->
        <div class="metric-card card-absent">
          <div class="card-content">
            <div class="card-icon">
              <i class="fas fa-calendar-times"></i>
            </div>
            <div class="card-details">
              <h3>Absent Today</h3>
              <p class="card-value">{{ absentToday }}</p>
              <div class="card-percentage">
                {{ (absentToday / totalEmployees * 100).toFixed(1) }}%
              </div>
            </div>
          </div>
          <div class="card-footer">
            <span>Today's absence</span>
          </div>
        </div>

        <!-- Additional Stats Card -->
        <div class="metric-card card-stats">
          <div class="card-content">
            <div class="stats-grid">
              <div class="stat-item">
                <i class="fas fa-male"></i>
                <span>65% Male</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-female"></i>
                <span>35% Female</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-building"></i>
                <span>5 Departments</span>
              </div>
              <div class="stat-item">
                <i class="fas fa-briefcase"></i>
                <span>12 Positions</span>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <span>Workforce distribution</span>
          </div>
        </div>
      </section>

      <!-- Recent Activities -->
      <section class="activities-section">
        <div class="section-header">
          <h2>Recent Activities</h2>
          <button class="view-all">View All</button>
        </div>
        <div class="activities-list">
          <div class="activity-item" *ngFor="let activity of recentActivities">
            <div class="activity-badge">
              <i class="fas fa-bell"></i>
            </div>
            <div class="activity-content">
              <p class="activity-message">{{ activity.message }}</p>
              <span class="activity-time">{{ activity.timestamp | date:'medium' }}</span>
            </div>
          </div>
        </div>
      </section>
    </ng-container>
  </div>
</div>