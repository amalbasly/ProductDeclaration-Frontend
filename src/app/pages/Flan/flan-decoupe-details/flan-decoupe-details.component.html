<div class="card" *ngIf="flanDecoupe">
  <div class="card-header">
    <h3>Détails de la découpe #{{ flanDecoupe.idDecoupe }}</h3>
  </div>
  <div class="card-body">
    <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border" role="status">
        <span class="sr-only">Chargement...</span>
      </div>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <!-- Only show this if message exists and success is false -->
    <div *ngIf="flanDecoupe.message && !flanDecoupe.success" class="alert alert-danger">
      {{ flanDecoupe.message }}
    </div>

    <div *ngIf="!isLoading">
      <div class="row mb-3">
        <div class="col-md-4">
          <strong>Produit original:</strong> {{ flanDecoupe.ptNumOriginal }}
        </div>
        <div class="col-md-4">
          <strong>Nombre de parts:</strong> {{ flanDecoupe.nombreDeParts }}
        </div>
        <div class="col-md-4">
          <strong>Label utilisé:</strong> {{ flanDecoupe.labelUtilise }}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <strong>Date de découpe:</strong> {{ flanDecoupe.dateDecoupe | date:'medium' }}
        </div>
        <div class="col-md-4">
          <strong>Utilisateur:</strong> {{ flanDecoupe.utilisateur || 'Non spécifié' }}
        </div>
      </div>

      <h4>Parts créées ({{ flanDecoupe.partsCount }})</h4>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Code partie</th>
            <th>Numéro</th>
            <th>Label</th>
            <th>Date création</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let part of flanDecoupe.parts">
            <td>{{ part.codePartie }}</td>
            <td>{{ part.numeroPartie }}</td>
            <td>{{ part.label }}</td>
            <td>{{ part.dateCreation | date:'medium' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>