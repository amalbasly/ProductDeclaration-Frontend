<h1 mat-dialog-title>Gallia Label Preview</h1>
<div mat-dialog-content>
  <div #previewContent id="label-preview" class="printable-content">
    <div class="label-container">
      <div class="label-header">
        <div class="label-title">{{ data.gallia.fields[0]?.fieldName || 'Gallia Label' }}</div>
        <div class="label-date">Date: {{ data.gallia.labelDate | date:'mediumDate' }}</div>
      </div>

      <div class="fields-grid">
        <div *ngFor="let field of data.gallia.fields; let i = index" class="field-section">
          <div class="field-name">{{ field.fieldName || 'Field ' + (i + 1) }}</div>
          <div class="field-value">{{ field.fieldValue }}</div>
          <div class="visualization-type">Visualization: {{ field.visualizationType }}</div>
          <div class="visualization">
            <img *ngIf="field.visualizationType === 'qrcode' && data.previews[i]" 
                 [src]="data.previews[i]" alt="QR Code" class="visualization-image">
            <img *ngIf="field.visualizationType === 'barcode' && data.previews[i]" 
                 [src]="data.previews[i]" alt="Barcode" class="visualization-image">
            <div *ngIf="field.visualizationType === 'datametrics'" class="text-visualization">
              {{ field.fieldValue }}
            </div>
          </div>
        </div>
      </div>

      <div class="label-footer">
        <div class="label-id">ID: {{ data.gallia.galliaId || 'NEW' }}</div>
        <div class="print-date">Printed: {{ today | date:'medium' }}</div>
      </div>
    </div>
  </div>
</div>

<div mat-dialog-actions align="end">
  <button mat-button (click)="print()" color="primary">
    <mat-icon>print</mat-icon> Print
  </button>
  <button mat-button (click)="save()" color="primary">
    <mat-icon>save</mat-icon> Save
  </button>
  <button mat-button (click)="cancel()">
    <mat-icon>close</mat-icon> Cancel
  </button>
</div>